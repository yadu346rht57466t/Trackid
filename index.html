<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Find Nearby Instagram IDs on Map</title>
  <style>
    #map {
      height: 400px;
      width: 100%;
    }
  </style>
</head>
<body>
  <h1>Find Nearby Instagram IDs on Map</h1>
  <button onclick="getCurrentLocation()">Get Current Location</button>
  <div id="map"></div>

  <script>
    function getCurrentLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
          var currentLocation = {lat: position.coords.latitude, lng: position.coords.longitude};
          findNearbyInstagramIDs(currentLocation);
        }, function(error) {
          console.log('Error getting current location:', error);
        });
      } else {
        console.log('Geolocation is not supported by this browser.');
      }
    }

    function findNearbyInstagramIDs(location) {
   
      var apiUrl = 'https://api.instagram.com/v1/locations/search?lat=' + location.lat + '&lng=' + location.lng + '&access_token=AQDi8Y-q0V67n_cbMHvpEIpKsiI6OUEvwVTEPnr4uqgiszIypL5AQnf9O3baeDY9332WkZRI-iM0KYVpEPgotSVX6VPUVtSyg_c4x0EY3zLLXFPkustq8yyiMi3lhTN9kYxtTfgd0F2yjQubGUEnqbR-yxP_p0mGI8uciGPLKVpeVIslSkK9vP6H-SltD268FAgmid3Q09asMKQQiOTiscRqx7kz9zMi0EsRxYb4y04tIA&state';

      fetch(apiUrl)
        .then(function(response) {
          return response.json();
        })
        .then(function(data) {
          displayMap(location, data.data);
        })
        .catch(function(error) {
          console.log('Error:', error);
        });
    }

    function displayMap(location, places) {
      var map = new google.maps.Map(document.getElementById('map'), {
        center: location,
        zoom: 15
      });

      places.forEach(function(place) {
        var placeName = place.name;
        var instagramId = place.id;

        var marker = new google.maps.Marker({
          position: {lat: place.latitude, lng: place.longitude},
          map: map,
          title: placeName
        });

        marker.addListener('click', function() {
          alert('Instagram ID of ' + placeName + ': ' + instagramId);
        });
      });
    }
  </script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCmSkZpeDKYKCOYSJesFfF8amsquzlQxFU&callback=initMap" async defer></script>
</body>
</html>
